# Create test files as described and ran the unpatched ls on them \
to verify the bug.
touch .foo bar
/usr/bin/ls -a -A
(output:) .  ..  .foo  bar

# Check the version of the unpatched ls.
/usr/bin/ls --version
(output:) ls (GNU coreutils) 8.22

# Download the tar, signature and keyring, then verify the signature.
wget ftp://ftp.gnu.org/gnu/coreutils/coreutils-8.29.tar.xz
wget ftp://ftp.gnu.org/gnu/coreutils/coreutils-8.29.tar.xz.sig
wget https://ftp.gnu.org/gnu/gnu-keyring.gpg
gpg --verify --keyring ./gnu-keyring.gpg coreutils-8.29.tar.xz.sig
(output:) gpg: Signature made Wed Dec 27 10:29:05 2017 PST using RSA key ID \
306037D9
gpg: /u/eng/class/classjze/.gnupg/trustdb.gpg: trustdb created
gpg: Good signature from "Pdraig Brady <P@draigBrady.com>"
gpg:                 aka "Pdraig Brady <pbrady@redhat.com>"
gpg:                 aka "Pdraig Brady <pixelbeat@gnu.org>"
gpg: WARNING: This key is not certified with a trusted signature!
gpg:          There is no indication that the signature belongs to the owner.
Primary key fingerprint: 6C37 DC12 121A 5006 BC1D  B804 DF6F D971 3060 37D9

# Unzipp the tar, then inspect the INSTALL file and installed coreutils as \
directed.
tar -xJvf coreutils-8.29.tar.xz
cd coreutils-8.29/
less INSTALL
./configure --prefix=/u/eng/class/classjze/coreutilsInstall && make && make \
install

# Verify that the new installation still has the bug
~/coreutilsInstall/bin/ls -a -A ../
(output:) .  ..  .foo  bar

# Download the patch and save as "patch_file", move into coreutils folder.
wget -O patch_file "https://debbugs.gnu.org/cgi/bugreport.cgi?filename=\
0001-ls-A-\now-overrides-a.patch;bug=30963;att=1;msg=10"
mv patch_file coreutils-8.29

# Install patch; NEWS change was rejected but should not affect functionality.
cd coreutils-8.29
patch -p1 < patch_file
(output:) patching file NEWS
Hunk #1 FAILED at 4.
1 out of 1 hunk FAILED -- saving rejects to file NEWS.rej
patching file src/ls.c
Hunk #1 succeeded at 1900 (offset -3 lines).
patching file tests/local.mk
patching file tests/ls/a-option.sh

# Run make; failed due to missing automake, but later fixed using autoreconf. \
My guess is that the below command generated by make is supposed to compile \
the missing files.
make
(output:) cd . && /bin/sh /u/eng/class/classjze/cs35l/assignment3/coreutils\
-8.29/build-aux/missing automake-1.15 --gnu Makefile
/u/eng/class/classjze/cs35l/assignment3/coreutils-8.29/build-aux/missing: \
line 81: automake-1.15: command not found
WARNING: 'automake-1.15' is missing on your system.
         You should only need it if you modified 'Makefile.am' or
         'configure.ac' or m4 files included by 'configure.ac'.
         The 'automake' program is part of the GNU Automake package:
         <http://www.gnu.org/software/automake>
         It also requires GNU Autoconf, GNU m4 and Perl in order to run:
         <http://www.gnu.org/software/autoconf>
         <http://www.gnu.org/software/m4/>
         <http://www.perl.org/>
make: *** [Makefile:5997: Makefile.in] Error 127

# Reconfigure TA suggested on Piazza, then rerun make. Fixed the errors above. \
autoreconf -fi
make

# Verify that the patch fixes the bug.
src/ls -a -A ../
> .foo bar